version: "3.9"

services:
  kafka1.${BASE_URL}:
    container_name: kafka1.${BASE_URL}
    extends:
      file: base.yml
      service: kafka-base
    depends_on:
      zookeeper.${BASE_URL}:
        condition: service_healthy
    environment:
      - KAFKA_BROKER_ID=1
      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka1.${BASE_URL}:9092
  
  kafka2.${BASE_URL}:
    container_name: kafka2.${BASE_URL}
    extends:
      file: base.yml
      service: kafka-base
    depends_on:
      zookeeper.${BASE_URL}:
        condition: service_healthy
    environment:
      - KAFKA_BROKER_ID=2
      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka2.${BASE_URL}:9092

  kafka3.${BASE_URL}:
    container_name: kafka3.${BASE_URL}
    extends:
      file: base.yml
      service: kafka-base
    depends_on:
      zookeeper.${BASE_URL}:
        condition: service_healthy
    environment:
      - KAFKA_BROKER_ID=3
      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka3.${BASE_URL}:9092

  kafka4.${BASE_URL}:
    container_name: kafka4.${BASE_URL}
    extends:
      file: base.yml
      service: kafka-base
    depends_on:
      zookeeper.${BASE_URL}:
        condition: service_healthy
    environment:
      - KAFKA_BROKER_ID=4
      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka4.${BASE_URL}:9092
